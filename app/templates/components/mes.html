<div class="card card-pro">
  <h4 class="text-info mb-3">
    <i class="bi bi-calendar3"></i> Calendario mensual — {{ month_label }}
  </h4>

  <!-- Header días -->
  <div class="vr-month-head">
    <div class="vr-dow">L</div>
    <div class="vr-dow">M</div>
    <div class="vr-dow">X</div>
    <div class="vr-dow">J</div>
    <div class="vr-dow">V</div>
    <div class="vr-dow">S</div>
    <div class="vr-dow">D</div>
  </div>

  <div class="vr-month-grid">
    {% for week in month_grid %}
      {% for f in week %}
        {% if f %}
          {% set p = planes_mes.get(f) %}
          {% set tipo = (p.plan_type|lower) if p else 'sinplan' %}

          <button
            type="button"
            class="vr-day {{ tipo }} {% if f == hoy %}is-today{% endif %}"
            data-fecha="{{ f.isoformat() }}"
            aria-label="Día {{ f.day }}"
          >
            <div class="vr-day-top">
              <span class="vr-day-num">{{ f.day }}</span>
              {% if p and p.puede_entrenar == "no" %}
                <span class="vr-dot vr-dot-danger" title="No entrena"></span>
              {% endif %}
            </div>

            {% if p %}
              <div class="vr-day-type">{{ tipo|capitalize }}</div>
            {% else %}
              <div class="vr-day-type muted">Sin plan</div>
            {% endif %}
          </button>
        {% else %}
          <div class="vr-day is-empty" aria-hidden="true"></div>
        {% endif %}
      {% endfor %}
    {% endfor %}
  </div>

  <div class="text-muted small mt-3">
    Tip: tocá un día para ver detalle (si tenés modal/JS conectado a <code>/api/day_detail</code>).
  </div>
</div>
