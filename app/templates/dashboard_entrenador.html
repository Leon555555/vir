{% extends "layout.html" %}
{% block title %}Dashboard Entrenador — VR Training{% endblock %}

{% block content %}

<div class="text-center mb-4">
  <img src="{{ url_for('static', filename='logo_blanco_vr_training.png') }}"
       style="height:70px; filter:drop-shadow(0 0 18px #ef4444);">
  <h2 class="fw-bold mt-2 text-danger">Panel del Entrenador</h2>
</div>

<!-- ============================= -->
<!-- SECCIÓN ATLETAS -->
<!-- ============================= -->
<div class="card bg-dark border-0 shadow-lg mb-5 p-4">
  <h4 class="text-light mb-4">
    <i class="bi bi-people-fill text-danger me-2"></i>Atletas registrados
  </h4>

  <div class="row g-4">
    {% for a in atletas %}
    <div class="col-md-4">
      <div class="athlete-card p-3 rounded shadow-sm">
        <h5 class="text-light mb-1">{{ a.nombre }}</h5>
        <div class="text-secondary small mb-2">{{ a.email }}</div>

        <div class="d-flex justify-content-between mt-3">
          <a href="{{ url_for('main.perfil_usuario', user_id=a.id) }}"
             class="btn btn-outline-info btn-sm w-50 me-2">
            <i class="bi bi-eye me-1"></i> Ver perfil
          </a>

          <form action="{{ url_for('main.admin_delete_user', user_id=a.id) }}"
                method="POST" class="w-50"
                onsubmit="return confirm('¿Eliminar a {{ a.nombre }}?');">
            <button class="btn btn-danger btn-sm w-100">
              <i class="bi bi-trash"></i>
            </button>
          </form>
        </div>
      </div>
    </div>
    {% endfor %}
  </div>
</div>


<!-- ============================= -->
<!-- SECCIÓN RUTINAS -->
<!-- ============================= -->
<div class="card bg-dark border-0 shadow-lg mb-4 p-4">
  <h4 class="text-light mb-3">
    <i class="bi bi-list-task text-danger me-2"></i>Rutinas disponibles
  </h4>

  <div class="row g-3">
    {% for r in rutinas %}
    <div class="col-md-4">
      <div class="routine-card p-3 rounded">

        <h6 class="fw-bold text-info">
          {{ r.nombre }}
        </h6>

        <span class="badge bg-secondary mb-2">{{ r.tipo|capitalize }}</span>

        <p class="small mb-2">{{ r.descripcion }}</p>

        <button class="btn btn-outline-light btn-sm w-100 mt-2"
                draggable="true"
                ondragstart="event.dataTransfer.setData('rutina_id','{{ r.id }}');">
          <i class="bi bi-hand-index-thumb me-1"></i> Arrastrar a un día
        </button>

      </div>
    </div>
    {% endfor %}
  </div>

  <!-- crear rutina -->
  <hr class="border-secondary mt-4 mb-3">

  <form action="{{ url_for('main.crear_rutina') }}" method="POST" class="row g-2">
    <div class="col-md-3">
      <input name="nombre" class="form-control" placeholder="Nombre rutina" required>
    </div>
    <div class="col-md-2">
      <select name="tipo" class="form-select">
        <option value="fuerza">Fuerza</option>
        <option value="pista">Pista</option>
        <option value="bike">Bike</option>
        <option value="natacion">Natación</option>
      </select>
    </div>
    <div class="col-md-5">
      <input name="descripcion" class="form-control" placeholder="Descripción…">
    </div>
    <div class="col-md-2">
      <button class="btn btn-danger w-100">
        <i class="bi bi-plus-lg"></i> Crear
      </button>
    </div>
  </form>

</div>


<style>
.athlete-card {
  background: #0e0e0e;
  border: 1px solid rgba(255,255,255,0.08);
  transition: .25s ease;
}
.athlete-card:hover {
  transform: translateY(-4px);
  box-shadow: 0 0 14px rgba(239,68,68,0.4);
}

.routine-card {
  background: #0b0b0b;
  border: 1px solid rgba(34,211,238,0.15);
  transition: .25s ease;
}
.routine-card:hover {
  transform: translateY(-4px);
  box-shadow: 0 0 12px rgba(34,211,238,0.3);
}
</style>

{% endblock %}
